nav6d:
  n6d_controller:
    ros__parameters:
      # Topic wiring
      path_topic: /nav6d/planner/path          # nav_msgs/Path to track
      pose_topic: /space_cobot/pose            # geometry_msgs/PoseStamped pose estimate
      imu_topic: /imu/data                     # sensor_msgs/Imu angular velocity
      cmd_force_topic: /space_cobot/cmd_force  # geometry_msgs/Wrench output
      command_frame: body                      # body frame used by cmd_bridge

      # Control loop tuning
      control_rate_hz: 60.0                    # Timer frequency for the PD loop
      lookahead_distance: 0.75                  # "Carrot" distance along the path (m)
      path_reacquire_period: 0.1               # How often we re-project onto the path (s)
      feedforward_speed: 0.01                   # Optional constant speed along the tangent (m/s)
      approach_slowdown_distance: 1.5          # Scale lookahead/feedforward when this close to goal (m)
      velocity_ema_alpha: 0.6                  # EMA blend factor for velocity estimation
      pos_tolerance: 0.25                      # Goal position tolerance (m)
      yaw_tolerance_rad: 0.02                  # Goal yaw tolerance (rad), just using yaw for simplicity
      max_velocity_mps: 4.0                    # Maximum allowed linear speed before braking (m/s)
      velocity_brake_gain: 1.0                 # Force gain applied when braking above max velocity
      debug_enabled: true                     # Enable verbose logs and debug publishers
      debug_target_pose_topic: /nav6d/controller/debug/tracked_pose  # Pose being tracked
      debug_error_topic: /nav6d/controller/debug/pose_error          # Twist w/ position/orientation error

      # Linear (xyz) PD gains
      kp_linear: [1.0, 1.0, 1.0]               # Per-axis KP for xyz position errors
      kd_linear: [10.0, 10.0, 10.0]               # Per-axis KD for xyz velocity errors

      # Angular (rpy) PD gains
      kp_angular: [1.0, 1.0, 1.0]              # KP for roll/pitch/yaw quaternion error
      kd_angular: [0.2, 0.2, 0.2]              # KD acting on angular velocity (IMU)

      # Per-axis saturation limits
      max_force_xyz: [300.0, 300.0, 300.0]        # Force clamp (body frame) [Fx, Fy, Fz]
      max_torque_rpy: [8.0, 8.0, 8.0]          # Torque clamp (body frame) [Mx, My, Mz]
